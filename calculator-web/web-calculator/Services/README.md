# Services

This directory contains the business logic services for the Web Calculator application.

## Overview

Services implement the core calculator functionality and business rules, separating concerns from the presentation layer (Controllers/Pages) and maintaining clean architecture principles.

## Service Pattern

Services in this application follow these guidelines:

- **Single Responsibility**: Each service handles a specific domain concern
- **Dependency Injection**: Services are registered in `Program.cs` and injected where needed
- **Interface-based**: Services implement interfaces for testability and flexibility
- **Stateless**: Services should be stateless and thread-safe

## Available Services

### ICalculatorService / CalculatorService

Handles mathematical expression evaluation and computation.

**Implementation Details:**

- Uses `System.Data.DataTable.Compute` for expression evaluation
- Supports basic arithmetic operations (+, -, \*, /)
- Supports parentheses for grouping
- Comprehensive error handling and logging
- Validates input expressions

**Responsibilities:**

- Parse and validate mathematical expressions
- Evaluate expressions following order of operations
- Handle errors (division by zero, invalid syntax, etc.)
- Log operations for auditing and debugging

**Usage Example:**

```csharp
// Service is registered in Program.cs
builder.Services.AddScoped<ICalculatorService, CalculatorService>();

// Inject into controller/page
public class CalculatorController : Controller
{
    private readonly ICalculatorService _calculatorService;

    public CalculatorController(ICalculatorService calculatorService)
    {
        _calculatorService = calculatorService;
    }

    public IActionResult Calculate(string expression)
    {
        try
        {
            var result = _calculatorService.EvaluateExpression(expression);
            return Ok(new { result });
        }
        catch (Exception ex)
        {
            return BadRequest(new { error = ex.Message });
        }
    }
}
```

## Files

- **ICalculatorService.cs**: Service interface definition
- **CalculatorService.cs**: Service implementation with logging and error handling

## Testing

Services should have corresponding unit tests in the test project:

- Test valid expressions (e.g., "2+2", "(10+5)\*2")
- Test error handling (invalid syntax, null/empty input)
- Test edge cases (division by zero, complex expressions)
- Mock dependencies (ILogger) as needed

---

Generated by GitHub Copilot.
