---
title: "VS-30: Matrix Calculator"
labels:
  ["slice:advanced", "priority:low", "type:feature", "phase:v3.0", "risk:high"]
assignees: []
---

## Overview

**Slice Type:** Advanced Feature
**Priority:** Low
**Effort:** 18+ hours
**Risk:** High (complex algorithms)
**Dependencies:** VS-21 (scientific mode)

Add matrix calculator mode for linear algebra operations.

## User Story

```
As an engineering student or professional
I want matrix calculation capabilities
So that I can perform linear algebra operations
```

## Acceptance Criteria

- [ ] Matrix input (variable dimensions)
- [ ] Matrix addition/subtraction
- [ ] Matrix multiplication
- [ ] Matrix transposition
- [ ] Determinant calculation
- [ ] Matrix inversion
- [ ] Identity matrix generation
- [ ] Scalar multiplication

## Technical Requirements

**Matrix Class:**

```javascript
class Matrix {
  constructor(rows, cols, data = null) {
    this.rows = rows;
    this.cols = cols;
    this.data =
      data ||
      Array(rows)
        .fill()
        .map(() => Array(cols).fill(0));
  }

  add(other) {
    if (this.rows !== other.rows || this.cols !== other.cols) {
      throw new Error("Matrix dimensions must match for addition");
    }

    const result = new Matrix(this.rows, this.cols);
    for (let i = 0; i < this.rows; i++) {
      for (let j = 0; j < this.cols; j++) {
        result.data[i][j] = this.data[i][j] + other.data[i][j];
      }
    }
    return result;
  }

  subtract(other) {
    if (this.rows !== other.rows || this.cols !== other.cols) {
      throw new Error("Matrix dimensions must match for subtraction");
    }

    const result = new Matrix(this.rows, this.cols);
    for (let i = 0; i < this.rows; i++) {
      for (let j = 0; j < this.cols; j++) {
        result.data[i][j] = this.data[i][j] - other.data[i][j];
      }
    }
    return result;
  }

  multiply(other) {
    if (this.cols !== other.rows) {
      throw new Error("Invalid matrix dimensions for multiplication");
    }

    const result = new Matrix(this.rows, other.cols);
    for (let i = 0; i < this.rows; i++) {
      for (let j = 0; j < other.cols; j++) {
        let sum = 0;
        for (let k = 0; k < this.cols; k++) {
          sum += this.data[i][k] * other.data[k][j];
        }
        result.data[i][j] = sum;
      }
    }
    return result;
  }

  scalarMultiply(scalar) {
    const result = new Matrix(this.rows, this.cols);
    for (let i = 0; i < this.rows; i++) {
      for (let j = 0; j < this.cols; j++) {
        result.data[i][j] = this.data[i][j] * scalar;
      }
    }
    return result;
  }

  transpose() {
    const result = new Matrix(this.cols, this.rows);
    for (let i = 0; i < this.rows; i++) {
      for (let j = 0; j < this.cols; j++) {
        result.data[j][i] = this.data[i][j];
      }
    }
    return result;
  }

  determinant() {
    if (this.rows !== this.cols) {
      throw new Error("Determinant only defined for square matrices");
    }

    if (this.rows === 1) {
      return this.data[0][0];
    }

    if (this.rows === 2) {
      return (
        this.data[0][0] * this.data[1][1] - this.data[0][1] * this.data[1][0]
      );
    }

    // Recursive cofactor expansion
    let det = 0;
    for (let j = 0; j < this.cols; j++) {
      det += Math.pow(-1, j) * this.data[0][j] * this.minor(0, j).determinant();
    }
    return det;
  }

  minor(row, col) {
    const result = new Matrix(this.rows - 1, this.cols - 1);
    let r = 0;
    for (let i = 0; i < this.rows; i++) {
      if (i === row) continue;
      let c = 0;
      for (let j = 0; j < this.cols; j++) {
        if (j === col) continue;
        result.data[r][c] = this.data[i][j];
        c++;
      }
      r++;
    }
    return result;
  }

  inverse() {
    const det = this.determinant();
    if (det === 0) {
      throw new Error("Matrix is singular and cannot be inverted");
    }

    // Implement matrix inversion using adjugate method
    // (Complex algorithm - simplified here)
    // For production, consider using a library like math.js
  }

  static identity(size) {
    const result = new Matrix(size, size);
    for (let i = 0; i < size; i++) {
      result.data[i][i] = 1;
    }
    return result;
  }
}
```

**UI Components:**

- Matrix dimension selector
- Matrix grid input
- Operation selector
- Multiple matrix inputs (A, B)
- Result matrix display
- Preset matrices (identity, zero)

## Implementation Checklist

- [ ] Implement Matrix class
- [ ] Implement matrix addition/subtraction
- [ ] Implement matrix multiplication
- [ ] Implement scalar multiplication
- [ ] Implement matrix transposition
- [ ] Implement determinant calculation
- [ ] Implement matrix inversion
- [ ] Create matrix input UI (grid)
- [ ] Add dimension selector
- [ ] Create operation buttons
- [ ] Display result matrix properly
- [ ] Style matrix calculator
- [ ] Write unit tests for Matrix class
- [ ] Test all matrix operations
- [ ] Test edge cases (singular matrices, invalid dimensions)
- [ ] Consider performance optimization for large matrices
- [ ] Add matrix calculator documentation
