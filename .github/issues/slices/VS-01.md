---
title: "VS-01: Display Current Value (Query Slice - Foundation)"
labels: ["slice:foundation", "priority:P0", "type:query", "phase:mvp"]
assignees: []
---

## Overview

**Slice Type:** Query (Read-Only)
**Priority:** P0 (Critical)
**Effort:** 4 hours
**Risk:** Low
**Dependencies:** None (foundational slice)

Implement the foundational display component that shows the current calculator value and updates when state changes.

## User Story

```
As a user
I want to see the numbers I input and calculation results
So that I can verify my entries and view outcomes
```

## Acceptance Criteria

- [ ] Displays "0" on initial page load
- [ ] Updates to show `currentValue` from calculator state
- [ ] Display has minimum font size of 24px
- [ ] Display has 4.5:1 contrast ratio minimum (WCAG 2.1 AA)
- [ ] Long numbers are truncated or formatted gracefully
- [ ] Error messages display clearly
- [ ] Display is readable from 2 feet away

## Technical Requirements

**HTML Structure:**

```html
<div class="calculator">
  <div
    class="calculator__display"
    id="display"
    role="status"
    aria-live="polite"
  >
    <span class="display__value">0</span>
  </div>
</div>
```

**State Read:**

- Reads: `calculatorState.currentValue`
- Reads: `calculatorState.displayError`

**Rendering Logic:**

1. On state change, read `currentValue`
2. If `displayError` is true, render error message
3. If `currentValue` is empty, render "0"
4. If `currentValue` is valid, render formatted value
5. Apply truncation if length exceeds display width

**CSS Requirements:**

- Font size: 2rem (32px) minimum
- Font family: Monospace for number clarity
- Text alignment: Right-aligned
- Background: High contrast with text
- Padding: Sufficient for readability
- Border: Visual separation from buttons

**Accessibility:**

- ARIA `role="status"` for screen reader announcements
- ARIA `aria-live="polite"` for non-disruptive updates
- High contrast ratio (minimum 4.5:1)

## Test Requirements

- Unit tests for rendering logic (7 test cases)
- Accessibility tests with screen reader
- Visual tests at various zoom levels

### Test Cases

| Test Case | Input State                                 | Expected Output               | Test Type     |
| --------- | ------------------------------------------- | ----------------------------- | ------------- |
| TC-V1-01  | `currentValue: ""`                          | Display shows "0"             | Unit          |
| TC-V1-02  | `currentValue: "42"`                        | Display shows "42"            | Unit          |
| TC-V1-03  | `currentValue: "0.123"`                     | Display shows "0.123"         | Unit          |
| TC-V1-04  | `currentValue: "12345678901234567890"`      | Display truncates gracefully  | Unit          |
| TC-V1-05  | `displayError: true, currentValue: "Error"` | Display shows "Error" message | Unit          |
| TC-V1-06  | Screen reader active                        | Announces value changes       | Accessibility |
| TC-V1-07  | Various zoom levels                         | Remains readable at 200% zoom | Visual        |

## Implementation Checklist

- [ ] Create HTML display structure
- [ ] Implement `updateDisplay()` function
- [ ] Add CSS styling with accessibility compliance
- [ ] Implement number formatting logic
- [ ] Add truncation for long numbers
- [ ] Add ARIA attributes for accessibility
- [ ] Write unit tests for rendering logic
- [ ] Perform manual accessibility testing
- [ ] Validate contrast ratios with tools
