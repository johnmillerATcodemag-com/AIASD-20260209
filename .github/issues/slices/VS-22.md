---
title: "VS-22: Theme Customization (Light/Dark Mode)"
labels: ["slice:progressive", "priority:medium", "type:feature", "phase:v2.0"]
assignees: []
---

## Overview

**Slice Type:** Progressive Enhancement
**Priority:** Medium
**Effort:** 8 hours
**Risk:** Low
**Dependencies:** VS-01 (UI foundation)

Implement multiple visual themes including light/dark mode.

## User Story

```
As a user
I want to customize the calculator's appearance
So that I can use it comfortably in different lighting conditions
```

## Acceptance Criteria

- [ ] Light theme available
- [ ] Dark theme available
- [ ] Theme toggle button
- [ ] Respects system preference
- [ ] Theme persists across sessions
- [ ] Smooth theme transitions
- [ ] All themes WCAG 2.1 AA compliant
- [ ] Optional: Additional color themes

## Technical Requirements

**CSS Custom Properties:**

```css
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --text-primary: #000000;
  --text-secondary: #666666;
  --btn-bg: #e0e0e0;
  --btn-operator: #2196f3;
  --btn-equals: #4caf50;
}

[data-theme="dark"] {
  --bg-primary: #1e1e1e;
  --bg-secondary: #2d2d2d;
  --text-primary: #ffffff;
  --text-secondary: #cccccc;
  --btn-bg: #3d3d3d;
  --btn-operator: #1976d2;
  --btn-equals: #388e3c;
}
```

**Theme Management:**

```javascript
function initTheme() {
  const savedTheme = localStorage.getItem("theme");
  const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
  const theme = savedTheme || systemTheme;
  setTheme(theme);
}

function setTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);
}

function toggleTheme() {
  const current = document.documentElement.getAttribute("data-theme");
  const next = current === "dark" ? "light" : "dark";
  setTheme(next);
}
```

**System Preference Detection:**

```javascript
window
  .matchMedia("(prefers-color-scheme: dark)")
  .addEventListener("change", (e) => {
    if (!localStorage.getItem("theme")) {
      setTheme(e.matches ? "dark" : "light");
    }
  });
```

## Implementation Checklist

- [ ] Define CSS custom properties for themes
- [ ] Create light theme colors
- [ ] Create dark theme colors
- [ ] Implement theme switcher function
- [ ] Add theme toggle button
- [ ] Detect system preference
- [ ] Save theme to localStorage
- [ ] Add transition animations
- [ ] Verify WCAG compliance for both themes
- [ ] Test theme persistence
- [ ] Test system preference sync
- [ ] Optional: Add more color themes
