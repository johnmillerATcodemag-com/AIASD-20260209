---
title: "VS-06: Delete Last Digit (Command Slice - Backspace)"
labels: ["slice:foundation", "priority:high", "type:command", "phase:mvp"]
assignees: []
---

## Overview

**Slice Type:** Command (State Modification)
**Priority:** High
**Effort:** 4 hours
**Risk:** Low
**Dependencies:** VS-01 (Display), VS-02 (Input Digit)

Implement backspace/delete functionality to remove the last entered digit.

## User Story

```
As a user
I want to delete the last digit I entered
So that I can correct mistakes without clearing everything
```

## Acceptance Criteria

- [ ] Delete/Backspace button removes last character
- [ ] Backspace key performs same action
- [ ] Handles empty value gracefully (shows "0")
- [ ] Can delete decimal point
- [ ] Does not affect `previousValue` or stored operation
- [ ] Visual feedback on button press

## Technical Requirements

**HTML Structure:**

```html
<button class="btn btn--delete" id="deleteBtn">âŒ«</button>
```

**State Modification:**

- Reads: `calculatorState.currentValue`
- Modifies: `calculatorState.currentValue` (removes last char)

**Business Logic:**

```javascript
function deleteLastDigit() {
  if (calculatorState.awaitingOperand) {
    // Don't delete if awaiting new operand
    return;
  }

  let value = calculatorState.currentValue;

  if (value.length > 0) {
    calculatorState.currentValue = value.slice(0, -1);
  }

  // If empty after deletion, stays empty (displays as "0")
  updateDisplay();
}
```

**Event Handling:**

- Click event on delete button
- Keyboard events for Backspace and Delete keys

## Test Requirements

- Unit tests for various deletion scenarios (7 test cases)
- Integration tests with input flow
- Keyboard delete testing

### Test Cases

| Test Case | Initial State           | Action          | Expected Result                   | Test Type   |
| --------- | ----------------------- | --------------- | --------------------------------- | ----------- |
| TC-V6-01  | `currentValue: "123"`   | Click delete    | `currentValue: "12"`              | Unit        |
| TC-V6-02  | `currentValue: "5"`     | Click delete    | `currentValue: ""` (displays "0") | Unit        |
| TC-V6-03  | `currentValue: ""`      | Click delete    | `currentValue: ""` (no change)    | Unit        |
| TC-V6-04  | `currentValue: "5.2"`   | Click delete    | `currentValue: "5."`              | Unit        |
| TC-V6-05  | `currentValue: "5."`    | Click delete    | `currentValue: "5"`               | Unit        |
| TC-V6-06  | `awaitingOperand: true` | Click delete    | No effect                         | Unit        |
| TC-V6-07  | Any state               | Press Backspace | Same as click                     | Integration |

## Implementation Checklist

- [ ] Create HTML delete button
- [ ] Implement `deleteLastDigit()` function
- [ ] Add string slicing logic
- [ ] Handle empty value edge case
- [ ] Add click event listener
- [ ] Add keyboard event listeners (Backspace, Delete)
- [ ] Create CSS button styling
- [ ] Write unit tests for all scenarios
- [ ] Write integration tests with VS-02
- [ ] Test keyboard delete functionality
