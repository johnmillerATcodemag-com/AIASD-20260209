---
title: "VS-05: Clear Calculator State (Command Slice)"
labels: ["slice:foundation", "priority:high", "type:command", "phase:mvp"]
assignees: []
---

## Overview

**Slice Type:** Command (State Modification)
**Priority:** High
**Effort:** 3 hours
**Risk:** Low
**Dependencies:** VS-01 (Display Current Value)

Implement clear button to reset all calculator state and start fresh calculation.

## User Story

```
As a user
I want to clear the calculator
So that I can start a new calculation from scratch
```

## Acceptance Criteria

- [ ] Clear button (C) resets all state properties
- [ ] Display shows "0" after clear
- [ ] Escape key performs same action
- [ ] Works from any calculator state
- [ ] Works after error states
- [ ] Visual feedback on button press

## Technical Requirements

**HTML Structure:**

```html
<button class="btn btn--clear" id="clearBtn">C</button>
```

**State Modification:**

- Modifies: All `calculatorState` properties
- Resets: `currentValue` to ""
- Resets: `previousValue` to ""
- Resets: `operation` to null
- Resets: `awaitingOperand` to false
- Resets: `displayError` to false

**Business Logic:**

```javascript
function clearCalculator() {
  calculatorState.currentValue = "";
  calculatorState.previousValue = "";
  calculatorState.operation = null;
  calculatorState.awaitingOperand = false;
  calculatorState.displayError = false;
  updateDisplay(); // Shows "0"
}
```

**Event Handling:**

- Click event on clear button
- Keyboard event for Escape key

## Test Requirements

- Unit tests for clear from various states (5 test cases)
- Integration tests with error recovery
- Keyboard clear testing

### Test Cases

| Test Case | Initial State        | Action       | Expected Result              | Test Type   |
| --------- | -------------------- | ------------ | ---------------------------- | ----------- |
| TC-V5-01  | `currentValue: "42"` | Click "C"    | All state reset, display "0" | Unit        |
| TC-V5-02  | Mid-calculation      | Click "C"    | All state reset              | Unit        |
| TC-V5-03  | Error state          | Click "C"    | Error cleared, display "0"   | Unit        |
| TC-V5-04  | Any state            | Press Escape | Same as click "C"            | Integration |
| TC-V5-05  | After equals         | Click "C"    | Ready for new calculation    | Unit        |

## Implementation Checklist

- [ ] Create HTML clear button
- [ ] Implement `clearCalculator()` function
- [ ] Reset all state properties
- [ ] Add click event listener
- [ ] Add keyboard event listener for Escape
- [ ] Trigger display update
- [ ] Create CSS button styling
- [ ] Write unit tests for all scenarios
- [ ] Test clearing from error states
- [ ] Test keyboard clear functionality
