---
title: "VS-29: Fraction Mode Calculator"
labels:
  [
    "slice:advanced",
    "priority:low",
    "type:feature",
    "phase:v3.0",
    "risk:medium",
  ]
assignees: []
---

## Overview

**Slice Type:** Advanced Feature
**Priority:** Low
**Effort:** 12 hours
**Risk:** Medium
**Dependencies:** VS-01 (display system)

Add fraction calculator mode for exact fractional arithmetic.

## User Story

```
As a student or professional
I want to work with fractions
So that I can perform exact calculations without decimal approximations
```

## Acceptance Criteria

- [ ] Fraction input (numerator/denominator)
- [ ] Fraction arithmetic (+, -, ร, รท)
- [ ] Automatic simplification
- [ ] Mixed number support
- [ ] Decimal to fraction conversion
- [ ] Fraction to decimal conversion
- [ ] Display as proper/improper fraction

## Technical Requirements

**Fraction Class:**

```javascript
class Fraction {
  constructor(numerator, denominator = 1) {
    if (denominator === 0) {
      throw new Error("Denominator cannot be zero");
    }
    this.numerator = numerator;
    this.denominator = denominator;
    this.simplify();
  }

  simplify() {
    const gcd = this.gcd(Math.abs(this.numerator), Math.abs(this.denominator));
    this.numerator /= gcd;
    this.denominator /= gcd;

    // Ensure denominator is positive
    if (this.denominator < 0) {
      this.numerator *= -1;
      this.denominator *= -1;
    }
  }

  gcd(a, b) {
    return b === 0 ? a : this.gcd(b, a % b);
  }

  add(other) {
    const num =
      this.numerator * other.denominator + other.numerator * this.denominator;
    const den = this.denominator * other.denominator;
    return new Fraction(num, den);
  }

  subtract(other) {
    const num =
      this.numerator * other.denominator - other.numerator * this.denominator;
    const den = this.denominator * other.denominator;
    return new Fraction(num, den);
  }

  multiply(other) {
    return new Fraction(
      this.numerator * other.numerator,
      this.denominator * other.denominator,
    );
  }

  divide(other) {
    if (other.numerator === 0) {
      throw new Error("Cannot divide by zero");
    }
    return new Fraction(
      this.numerator * other.denominator,
      this.denominator * other.numerator,
    );
  }

  toDecimal() {
    return this.numerator / this.denominator;
  }

  toMixedNumber() {
    const whole = Math.floor(Math.abs(this.numerator) / this.denominator);
    const remainder = Math.abs(this.numerator) % this.denominator;
    const sign = this.numerator < 0 ? "-" : "";

    if (whole === 0) {
      return `${sign}${remainder}/${this.denominator}`;
    }
    if (remainder === 0) {
      return `${sign}${whole}`;
    }
    return `${sign}${whole} ${remainder}/${this.denominator}`;
  }

  toString() {
    return `${this.numerator}/${this.denominator}`;
  }

  static fromDecimal(decimal, maxDenominator = 10000) {
    // Convert decimal to fraction using continued fractions algorithm
    let sign = decimal < 0 ? -1 : 1;
    decimal = Math.abs(decimal);

    let numerator = Math.round(decimal * maxDenominator);
    let denominator = maxDenominator;

    return new Fraction(sign * numerator, denominator);
  }
}
```

**UI Components:**

- Fraction input fields (numerator, denominator)
- Mixed number input
- Fraction display with horizontal bar
- Simplify button
- Convert to decimal button
- Convert to fraction button

## Implementation Checklist

- [ ] Implement Fraction class
- [ ] Implement all arithmetic operations
- [ ] Implement GCD algorithm
- [ ] Implement automatic simplification
- [ ] Implement mixed number support
- [ ] Implement decimal-to-fraction conversion
- [ ] Create fraction input UI
- [ ] Create fraction display with proper formatting
- [ ] Add conversion buttons
- [ ] Style fraction calculator
- [ ] Write unit tests for Fraction class
- [ ] Test all arithmetic operations
- [ ] Test simplification
- [ ] Test decimal conversions
- [ ] Test edge cases (zero, negative, improper)
